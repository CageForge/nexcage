# Roadmap проекту Proxmox LXC CRI

## Структура гілок розробки
- `main` - основна гілка, стабільна версія
- `feature/refactor-runtime` - оптимізація та рефакторинг CRI/OCI реалізації
- `feature/oci-runtime-completion` - завершення OCI-сумісного runtime
- `feature/proxmox-api-extended` - розширення функціональності Proxmox API
- `feature/container-hooks` - реалізація системи хуків для контейнерів
- `feature/network-subsystem` - реалізація мережевої підсистеми

## Поточний етап: POC (Proof of Concept)
Тривалість: 4 тижні
Прогрес: 90%
Витрачено часу: 144 години
Очікуваний час до завершення: ~12 годин

### Мета
Продемонструвати можливість інтеграції Proxmox LXC з Kubernetes через CRI та реалізувати базовий OCI-сумісний runtime.

### Очікуваний результат
- Базова реалізація CRI для комунікації з Kubernetes ✓
- Інтеграція з Proxmox API для управління LXC контейнерами ✓
- Відповідність специфікації OCI для контейнерів ✓
- Успішний запуск LXC контейнера як Pod через CRI-O (в процесі, 95%)

### Виконані завдання
1. Налаштування базової структури проекту ✓ (16 годин)
   - Ініціалізація Zig проекту ✓
   - Налаштування середовища розробки ✓
   - Конфігурація системи збірки ✓
   - Налаштування CI/CD ✓

2. Реалізація базових операцій з контейнерами ✓ (24 години)
   - Створення ✓
   - Видалення ✓
   - Запуск ✓
   - Зупинка ✓
   - Отримання статусу ✓

3. Реалізація gRPC сервера для CRI ✓ (20 годин)
   - Базова структура сервера ✓
   - Реалізація основних методів ✓
   - Обробка помилок та логування ✓
   - Тестування комунікації ✓

4. Реалізація тестів для основних операцій ✓ (12 годин)
   - Тести базових операцій з контейнерами ✓
   - Тести gRPC взаємодії ✓
   - Тести обробки помилок ✓

5. Реалізація OCI-сумісного runtime ✓ (16 годин)
   - Створення специфікації контейнера ✓
   - Реалізація структур даних для OCI специфікації ✓
   - Реалізація білдера для створення специфікацій ✓
   - Тести для OCI специфікацій та білдера ✓
   - Реалізація структури Container та ContainerState ✓
   - Тести для Container та ContainerState ✓

6. Інтеграція з Proxmox API ✓ (8 годин)
   - Базова реалізація клієнта ✓
   - Автентифікація та авторизація ✓
   - Базові операції з LXC ✓
   - Обробка помилок ✓

7. Оптимізація збірки та залежностей ✓ (16 годин)
   - Виправлення конфліктів з бібліотеками ✓
   - Налаштування правильних шляхів до бібліотек ✓
   - Оптимізація системи збірки ✓
   - Покращення обробки помилок ✓

8. Реалізація системи хуків ✓ (12 годин) [feature/container-hooks]
   - Створення базового менеджера хуків ✓ (3 години)
   - Реалізація prestart, poststart, poststop хуків ✓ (4 години)
   - Реалізація передачі контексту в хуки ✓ (2 години)
   - Обробка помилок та таймаутів ✓ (2 години)
   - Безпечне управління ресурсами ✓ (1 година)

9. Оновлення OCI runtime та мережевої підсистеми ✓ (12 годин) [feature/network-subsystem]
   - Реалізація мережевого менеджера ✓ (4 години)
   - Інтеграція з NetworkManager для OCI ✓ (3 години)
   - Реалізація базових мережевих операцій ✓ (3 години)
   - Обробка мережевих помилок та відновлення ✓ (2 години)

10. Реалізація мережевої підсистеми ✓ (8 годин) [feature/network-subsystem]
    - Створення NetworkManager з підтримкою Cilium CNI ✓ (3 години)
    - Реалізація управління мережевими інтерфейсами ✓ (2 години)
    - Інтеграція з CRI та OCI runtime ✓ (2 години)
    - Тестування та виправлення помилок ✓ (1 година)

### Поточні завдання (Залишилось ~12 годин)
1. Завершення інтеграції з CRI-O (4 години)
   - Тестування життєвого циклу контейнерів
   - Перевірка мережевої взаємодії
   - Валідація конфігурації подів

2. Фінальне тестування та оптимізація (6 годин)
   - Навантажувальне тестування
   - Профілювання продуктивності
   - Оптимізація використання пам'яті
   - Покращення обробки помилок

3. Документація та підготовка до релізу (2 години)
   - Оновлення README
   - Документація API
   - Інструкції з встановлення та налаштування

## План подальшого розвитку

### POV (Proof of Value) - 3 тижні
1. Тиждень 1: Оптимізація та стабілізація
   - Оптимізація продуктивності
   - Покращення управління ресурсами
   - Розширене тестування під навантаженням

2. Тиждень 2: Розширення функціональності
   - Реалізація додаткових CRI функцій
   - Покращення інтеграції з Kubernetes
   - Розширення можливостей мережевої підсистеми

3. Тиждень 3: Безпека та моніторинг
   - Аудит безпеки
   - Впровадження метрик та моніторингу
   - Покращення логування та діагностики

### MVP (Minimum Viable Product) - 3 тижні
1. Тиждень 1: Стабілізація та документація
   - Повна документація API
   - Приклади використання
   - Інструкції з розгортання

2. Тиждень 2: Розширені функції
   - Підтримка мережевих політик
   - Управління сховищем
   - Міграція контейнерів

3. Тиждень 3: Підготовка до production
   - Тестування в production-подібному середовищі
   - Інструменти для розгортання
   - Автоматизація процесів

## Загальний прогрес проекту
- Прогрес: 90% (збільшено з 85% завдяки завершенню мережевої підсистеми та інтеграції з CRI/OCI runtime)
- Витрачено часу: 144 години (+8 годин на реалізацію мережевої підсистеми)
- Очікуваний час до завершення POC: 12 годин
- Очікуваний час до повного завершення проекту: 6 тижнів

### Ключові досягнення останнього етапу
1. Реалізовано повноцінну мережеву підсистему з підтримкою Cilium CNI
2. Інтегровано мережеву підсистему з CRI та OCI runtime
3. Покращено управління мережевими інтерфейсами та їх конфігурацією
4. Додано обробку мережевих помилок та механізми відновлення
5. Розширено документацію та оновлено ROADMAP

### Наступні кроки
1. Завершення інтеграції з CRI-O
2. Розширене тестування мережевої підсистеми
3. Оптимізація продуктивності та використання ресурсів
4. Підготовка документації для користувачів
5. Планування наступних етапів розвитку проекту
